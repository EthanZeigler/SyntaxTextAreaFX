{"automake.json": [
    {
        "match": "@\\%{variable}@",
        "id": "subst",
        "style-ref": "subst"
    },
    {
        "include": {"context": {"ref": "def:in-comment"}},
        "class-disabled": "no-spell-check",
        "start": "^##",
        "id": "nosubcomment",
        "end-at-line-end": true
    },
    {
        "include": {"context": [
            {"ref": "subst"},
            {"ref": "def:in-comment"}
        ]},
        "class-disabled": "no-spell-check",
        "start": "#",
        "id": "comment",
        "end-at-line-end": true
    },
    {
        "include": {"context": [
            {
                "where": "start",
                "sub-pattern": 1,
                "style-ref": "keyword"
            },
            {"ref": "assignment-rhs"}
        ]},
        "start": "\\%{space}((?:AM_)?\\%{flags}FLAGS)\\%{operator}",
        "id": "flags-assignment",
        "end-at-line-end": true
    },
    {
        "include": {"context": [
            {
                "where": "start",
                "sub-pattern": 1,
                "style-ref": "keyword"
            },
            {"ref": "assignment-rhs"}
        ]},
        "start": "\\%{space}(\\%{keyword})\\%{operator}",
        "id": "keyword-assignment",
        "end-at-line-end": true
    },
    {
        "include": {"context": [
            {
                "where": "start",
                "sub-pattern": "primary",
                "style-ref": "primary"
            },
            {
                "where": "start",
                "sub-pattern": "pprefix",
                "style-ref": "prefix"
            },
            {
                "where": "start",
                "sub-pattern": "target",
                "style-ref": "target"
            },
            {
                "where": "start",
                "sub-pattern": "dirname",
                "style-ref": "dirname"
            },
            {
                "where": "start",
                "sub-pattern": "pvariable",
                "style-ref": "lhs"
            },
            {"ref": "assignment-rhs"}
        ]},
        "start": {
            "extended": true,
            "content": "\\%{space}                           # beginning of line\n        (?P<pprefix>(?:\\%{prefix}_)*) # any number of prefixes_\n        (?:                                 # either...\n          (?P<target>\\%{target})|     # ...a nondir target (e.g. noinst),\n          (?P<dirname>\\%{dirname})|   # ...a dir target (e.g. bin)\n          (?P<pvariable>\\%{variable}) # ...or a user-defined dir\n        )\n        (?P<primary>_\\%{primary})     # and a _PRIMARY\n        \\%{operator}                        # an assignment operator"
        },
        "id": "primary-assignment",
        "end-at-line-end": true
    },
    {
        "include": {"context": [
            {
                "where": "start",
                "sub-pattern": "sprefix",
                "style-ref": "prefix"
            },
            {
                "where": "start",
                "sub-pattern": "svariable",
                "style-ref": "lhs"
            },
            {
                "where": "start",
                "sub-pattern": "secondary",
                "style-ref": "secondary"
            },
            {"ref": "assignment-rhs"}
        ]},
        "start": {
            "extended": true,
            "content": "\\%{space}                           # beginning of line\n        (?P<sprefix>\n          (?:(?:\\%{prefix}|EXTRA)_)*)       # any number of prefix_ or EXTRA_\n        (?P<svariable>\\%{variable})   # the canonicalized_program_name\n        (?P<secondary>_\\%{secondary}) # and a _SECONDARY\n        \\%{operator}                        # an assignment operator"
        },
        "id": "secondary-assignment",
        "end-at-line-end": true
    },
    {
        "include": {"context": [
            {
                "where": "start",
                "id": "dir-lhs",
                "sub-pattern": 1,
                "style-ref": "lhs"
            },
            {
                "where": "start",
                "id": "dir",
                "sub-pattern": 2,
                "style-ref": "keyword"
            },
            {"ref": "assignment-rhs"}
        ]},
        "start": "\\%{space}(\\%{variable})(dir)\\%{operator}",
        "id": "dir-assignment",
        "end-at-line-end": true
    },
    {
        "include": {"context": [
            {"ref": "def:line-continue"},
            {"ref": "def:shell-like-comment"},
            {"ref": "makefile:variable"},
            {"ref": "makefile:string"},
            {"ref": "def:single-quoted-string"},
            {"ref": "sh:backtick-subshell"},
            {"ref": "subst"}
        ]},
        "start": "",
        "id": "assignment-rhs",
        "end-at-line-end": true
    },
    {
        "include": {"context": [
            {"ref": "def:line-continue"},
            {"ref": "subst"},
            {
                "ref": "sh:sh",
                "original": true
            }
        ]},
        "start": "",
        "id": "command",
        "end-at-line-end": true,
        "extend-parent": false
    },
    {
        "include": {"context": [
            {"ref": "flags-assignment"},
            {"ref": "keyword-assignment"},
            {"ref": "primary-assignment"},
            {"ref": "secondary-assignment"},
            {"ref": "dir-assignment"},
            {"ref": "makefile:assignment"}
        ]},
        "id": "assignment"
    },
    {
        "include": {"context": [
            {
                "ref": "makefile:directives",
                "style-ref": "def:keyword"
            },
            {
                "ref": "makefile:functions",
                "style-ref": "def:function"
            },
            {
                "ref": "subst",
                "style-ref": "subst"
            },
            {
                "ref": "nosubcomment",
                "style-ref": "def:comment"
            },
            {
                "ref": "comment",
                "style-ref": "def:comment"
            },
            {"ref": "assignment"},
            {"ref": "makefile:rule"}
        ]},
        "id": "automake"
    }
]}